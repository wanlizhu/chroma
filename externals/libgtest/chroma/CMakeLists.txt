CMAKE_MINIMUM_REQUIRED(VERSION 3.1)

PROJECT(gtest)

SET(OUR_DIR ${CMAKE_CURRENT_SOURCE_DIR}/..)
SET(TARGET gtest)
SET(SRC_DIR ${OUR_DIR}/src)
SET(PUBLIC_HDR_DIR ${OUR_DIR}/include)
SET(PRIVATE_HDR_DIR ${OUR_DIR})

# sources dependencies
SET(SRCS
    ${SRC_DIR}/gtest-all.cc)

IF (WIN32)
    ADD_DEFINITIONS(/W0)
ENDIF()

INCLUDE_DIRECTORIES(
    ${PUBLIC_HDR_DIR}
    ${PRIVATE_HDR_DIR})

# we're building a library
ADD_LIBRARY(${TARGET} STATIC ${SRCS})
SET_TARGET_PROPERTIES(${TARGET} PROPERTIES FOLDER Externals)

IF (LINUX)
    SET(THREADS_PREFER_PTHREAD_FLAG ON)
    FIND_PACKAGE(Threads REQUIRED)
    TARGET_LINK_LIBRARIES(${TARGET} Threads::Threads)
ENDIF()

# specify where the public headers of this library are
TARGET_INCLUDE_DIRECTORIES(${TARGET} PUBLIC ${PUBLIC_HDR_DIR})
